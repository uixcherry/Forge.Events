# Forge.Events - Плагин для ивентов и лутбоксов в Unturned

Плагин **Forge.Events** добавляет на сервер систему автоматических ивентов с ящиками добычи, а также настраиваемые лутбоксы, которые респавнятся на карте через определенные промежутки времени.

## Содержание
- [Основные функции](#основные-функции)
- [Команды](#команды)
  - [Управление ивентами](#управление-ивентами)
  - [Управление локациями ивентов](#управление-локациями-ивентов)
  - [Управление лутбоксами](#управление-лутбоксами)
  - [Управление точками спавна лутбоксов](#управление-точками-спавна-лутбоксов)
- [Механики плагина](#механики-плагина)
  - [Ивенты с ящиками](#ивенты-с-ящиками)
  - [Лутбоксы](#лутбоксы)
- [Настройка](#настройка)
  - [Основные настройки](#основные-настройки)
  - [Настройка ивент-ящиков](#настройка-ивент-ящиков)
  - [Настройка лутбоксов](#настройка-лутбоксов)

## Основные функции

- **Автоматические ивенты** - случайные события с ящиками добычи, которые появляются на карте
- **Настраиваемые лутбоксы** - ящики с предметами, которые респавнятся в указанных точках
- **Гибкие настройки** - полная настройка содержимого, времени респавна, расположения и других параметров
- **Система уведомлений** - оповещения игроков о начале ивентов и отметки на карте

## Команды

### Управление ивентами
| Команда | Право доступа | Описание |
|---------|---------------|----------|
| `/event start [тип_ивента]` | `events.admin` | Принудительно запускает ивент указанного типа. Доступный тип: `box` (ящик) |
| `/event list` | `events.admin` | Показывает список активных ивентов и их местоположение |
| `/event stop` | `events.admin` | Останавливает все активные ивенты |

### Управление локациями ивентов
| Команда | Право доступа | Описание |
|---------|---------------|----------|
| `/eventlocation add [имя]` | `events.admin` | Добавляет новую локацию для появления ивентов на текущей позиции игрока |
| `/eventlocation remove [id]` | `events.admin` | Удаляет локацию с указанным ID |
| `/eventlocation list` | `events.admin` | Показывает список всех доступных локаций для ивентов |

Все команды также доступны через сокращенный вариант `/eloc`.

### Управление лутбоксами
| Команда | Право доступа | Описание |
|---------|---------------|----------|
| `/lootbox respawn` | `forge.events.admin` | Принудительно респавнит все лутбоксы |
| `/lootbox respawn [ID_типа]` | `forge.events.admin` | Принудительно респавнит лутбоксы указанного типа |
| `/lootbox list` | `forge.events.admin` | Показывает список всех типов лутбоксов |
| `/lootbox info [ID_типа]` | `forge.events.admin` | Показывает подробную информацию о лутбоксе с указанным ID |

Все команды также доступны через сокращенный вариант `/lb`.

### Управление точками спавна лутбоксов
| Команда | Право доступа | Описание |
|---------|---------------|----------|
| `/spbox [тип_лутбокса] [ID_точки]` | `events.admin` | Добавляет точку спавна для лутбокса указанного типа на текущей позиции игрока |
| `/delbox [ID_точки]` | `events.admin` | Удаляет точку спавна лутбокса с указанным ID |

## Механики плагина

### Ивенты с ящиками

1. **Автоматический запуск**:
   - Ивенты запускаются через настраиваемый интервал времени
   - Для запуска требуется минимальное количество игроков онлайн

2. **Процесс ивента**:
   - На карте в одной из настроенных локаций появляется ящик
   - Всем игрокам приходит уведомление о начале ивента
   - На карте отмечается место появления ящика
   - Первый игрок, который взаимодействует с ящиком, активирует таймер обратного отсчета
   - После завершения отсчета ящик заполняется случайными предметами из настроенного списка
   - Все игроки получают уведомление о завершении ивента

3. **Защита зоны ивента**:
   - Вокруг ящика ивента запрещено строительство до завершения ивента
   - Ящик ивента невозможно повредить или уничтожить

4. **Завершение ивента**:
   - После опустошения ящика он исчезает и начинается таймер до следующего ивента

### Лутбоксы

1. **Система лутбоксов**:
   - Лутбоксы автоматически появляются на заданных точках спавна
   - Можно настроить разные типы лутбоксов с разными предметами и временем респавна
   - Для каждого типа можно указать максимальное количество ящиков на карте

2. **Особенности лутбоксов**:
   - Можно настроить гарантированное минимальное количество предметов
   - Можно указать, будет ли ящик удаляться после опустошения
   - Настраиваемые шансы выпадения предметов и их количество

## Настройка

### Основные настройки

В конфигурации плагина доступны следующие основные параметры:

| Параметр | Описание |
|----------|----------|
| `IsEnabled` | Включен ли плагин |
| `EventIntervalMinutes` | Интервал между ивентами в минутах |
| `MinPlayersForEvent` | Минимальное количество игроков для запуска ивента |
| `CountdownTimerSeconds` | Время обратного отсчета при активации ивента в секундах |
| `MinDistanceFromBuildables` | Минимальное расстояние от построек для спавна ящика |
| `MinDistanceFromWater` | Минимальное расстояние от воды для спавна ящика |
| `MaxSlopeAngle` | Максимальный угол наклона поверхности для спавна ящика |
| `NoBuildsAroundEventBoxRadius` | Радиус запрета строительства вокруг ящика ивента |

### Настройка ивент-ящиков

Для каждого типа ивент-ящика можно настроить:

- `Id` - уникальный идентификатор
- `Name` - отображаемое название
- `Rarity` - редкость ящика (Common, Uncommon, Rare, VeryRare, Epic, Legendary, Mythical)
- `Weight` - вес при выборе (чем больше, тем выше шанс выбора)
- `BarricadeId` - ID баррикады ящика в игре
- `Items` - список предметов с параметрами:
  - `Id` - ID предмета в игре
  - `Chance` - шанс выпадения (от 1 до 100)
  - `Min` - минимальное количество
  - `Max` - максимальное количество

### Настройка лутбоксов

Для каждого типа лутбокса можно настроить:

- `Id` - уникальный идентификатор
- `Name` - отображаемое название
- `RespawnMinutes` - время между респавнами в минутах
- `RemoveWhenEmpty` - удалять ли ящик после опустошения
- `BarricadeId` - ID баррикады ящика в игре
- `StorageWidth` - ширина инвентаря ящика
- `StorageHeight` - высота инвентаря ящика
- `MaxBoxesToSpawn` - максимальное количество ящиков данного типа на карте
- `GuaranteedItemsMin` - минимальное гарантированное количество предметов
- `GuaranteedItemsMax` - максимальное гарантированное количество предметов
- `Items` - список предметов с параметрами:
  - `Id` - ID предмета в игре
  - `Chance` - шанс выпадения (от 1 до 100)
  - `Min` - минимальное количество
  - `Max` - максимальное количество
